{
    "sourceFile": "src/main/java/com/mygg/core/CollisionHandler.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1764516368384,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764516381450,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,32 @@\n package com.mygg.core;\r\n \r\n public class CollisionHandler {\r\n-    \r\n-}\r\n+    private final int[][] map;\r\n+    private final int tileSize;\r\n+\r\n+    public CollisionHandler(int[][] map, int tileSize) {\r\n+        this.map = map;\r\n+        this.tileSize = tileSize;\r\n+    }\r\n+\r\n+    /**\r\n+     * Mengecek apakah posisi (px, py) bertabrakan dengan tembok atau batas map.\r\n+     * @param px Posisi X player (pixel)\r\n+     * @param py Posisi Y player (pixel)\r\n+     * @return true jika bertabrakan, false jika aman.\r\n+     */\r\n+    public boolean checkCollision(double px, double py) {\r\n+        int gridX = (int) (px / tileSize);\r\n+        int gridY = (int) (py / tileSize);\r\n+\r\n+        // Boundary protection: map[x][y] dengan x ∈ [0, w), y ∈ [0, h)\r\n+        // Jika koordinat di luar array map, anggap tabrakan (return true)\r\n+        if (gridX < 0 || gridY < 0 || gridX >= map.length || gridY >= map[0].length) {\r\n+            return true;\r\n+        }\r\n+\r\n+        // Cek tipe tile: 1 (Unbreakable) atau 2 (Breakable) adalah tembok\r\n+        int t = map[gridX][gridY];\r\n+        return (t == 1 || t == 2);\r\n+    }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764516642226,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,21 +9,46 @@\n         this.tileSize = tileSize;\r\n     }\r\n \r\n     /**\r\n-     * Mengecek apakah posisi (px, py) bertabrakan dengan tembok atau batas map.\r\n-     * @param px Posisi X player (pixel)\r\n-     * @param py Posisi Y player (pixel)\r\n-     * @return true jika bertabrakan, false jika aman.\r\n+     * Mengecek apakah area kotak di posisi (x, y) bertabrakan dengan tembok.\r\n+     * Menggunakan 4 titik sudut (Bounding Box) untuk akurasi.\r\n+     * * @param x Posisi X player (kiri atas)\r\n+     * @param y Posisi Y player (kiri atas)\r\n+     * @return true jika ada bagian player yang menabrak tembok.\r\n      */\r\n-    public boolean checkCollision(double px, double py) {\r\n+    public boolean checkCollision(double x, double y) {\r\n+        // Kita anggap ukuran hitbox player sedikit lebih kecil dari tile (32px)\r\n+        // Misal 28px, supaya ada ruang gerak (margin 2px kiri-kanan)\r\n+        // Ini membuat player tidak gampang 'nyangkut' di belokan.\r\n+        double hitboxSize = 28;\r\n+        double offset = (tileSize - hitboxSize) / 2; // (32 - 28) / 2 = 2px offset\r\n+\r\n+        double left = x + offset;\r\n+        double right = x + offset + hitboxSize;\r\n+        double top = y + offset;\r\n+        double bottom = y + offset + hitboxSize;\r\n+\r\n+        // Cek ke-4 sudut hitbox\r\n+        boolean topLeft = isSolid(left, top);\r\n+        boolean topRight = isSolid(right, top);\r\n+        boolean bottomLeft = isSolid(left, bottom);\r\n+        boolean bottomRight = isSolid(right, bottom);\r\n+\r\n+        // Jika salah satu sudut kena tembok, return true (tabrakan)\r\n+        return topLeft || topRight || bottomLeft || bottomRight;\r\n+    }\r\n+\r\n+    /**\r\n+     * Helper private untuk mengecek apakah satu titik pixel spesifik adalah tembok.\r\n+     */\r\n+    private boolean isSolid(double px, double py) {\r\n         int gridX = (int) (px / tileSize);\r\n         int gridY = (int) (py / tileSize);\r\n \r\n-        // Boundary protection: map[x][y] dengan x ∈ [0, w), y ∈ [0, h)\r\n-        // Jika koordinat di luar array map, anggap tabrakan (return true)\r\n+        // Boundary protection: Cegah error ArrayOutOfBounds\r\n         if (gridX < 0 || gridY < 0 || gridX >= map.length || gridY >= map[0].length) {\r\n-            return true;\r\n+            return true; // Anggap luar map adalah tembok\r\n         }\r\n \r\n         // Cek tipe tile: 1 (Unbreakable) atau 2 (Breakable) adalah tembok\r\n         int t = map[gridX][gridY];\r\n"
                },
                {
                    "date": 1764516912277,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,25 +11,31 @@\n \r\n     /**\r\n      * Mengecek apakah area kotak di posisi (x, y) bertabrakan dengan tembok.\r\n      * Menggunakan 4 titik sudut (Bounding Box) untuk akurasi.\r\n-     * * @param x Posisi X player (kiri atas)\r\n-     * @param y Posisi Y player (kiri atas)\r\n-     * @return true jika ada bagian player yang menabrak tembok.\r\n+     * * @param x Posisi X player (kiri atas sprite)\r\n+     * @param y Posisi Y player (kiri atas sprite)\r\n+     * @return true jika ada bagian hitbox player yang menabrak tembok.\r\n      */\r\n     public boolean checkCollision(double x, double y) {\r\n-        // Kita anggap ukuran hitbox player sedikit lebih kecil dari tile (32px)\r\n-        // Misal 28px, supaya ada ruang gerak (margin 2px kiri-kanan)\r\n-        // Ini membuat player tidak gampang 'nyangkut' di belokan.\r\n-        double hitboxSize = 28;\r\n-        double offset = (tileSize - hitboxSize) / 2; // (32 - 28) / 2 = 2px offset\r\n+        // PERBAIKAN: Hitbox diperkecil agar player tidak gampang nyangkut di lorong.\r\n+        // Tile = 32px. Jika Hitbox = 32px, harus pixel-perfect untuk lewat (mustahil bagi manusia).\r\n+        // Kita set ke 24px. Sisa 8px (4px kiri, 4px kanan) adalah toleransi \"nyerempet\".\r\n+        double hitboxSize = 24.0; \r\n+        \r\n+        // Offset agar hitbox berada tepat di TENGAH sprite visual\r\n+        // (32 - 24) / 2 = 4.0 pixel offset dari kiri/atas gambar\r\n+        double offset = (tileSize - hitboxSize) / 2.0;\r\n \r\n         double left = x + offset;\r\n-        double right = x + offset + hitboxSize;\r\n         double top = y + offset;\r\n-        double bottom = y + offset + hitboxSize;\r\n+        \r\n+        // Sisi kanan dan bawah hitbox\r\n+        // Dikurangi epsilon sangat kecil (-0.01) untuk mencegah floating point error pas di garis grid\r\n+        double right = left + hitboxSize - 0.01;\r\n+        double bottom = top + hitboxSize - 0.01;\r\n \r\n-        // Cek ke-4 sudut hitbox\r\n+        // Cek ke-4 sudut hitbox (Kiri-Atas, Kanan-Atas, Kiri-Bawah, Kanan-Bawah)\r\n         boolean topLeft = isSolid(left, top);\r\n         boolean topRight = isSolid(right, top);\r\n         boolean bottomLeft = isSolid(left, bottom);\r\n         boolean bottomRight = isSolid(right, bottom);\r\n"
                },
                {
                    "date": 1764517032920,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,11 +3,22 @@\n public class CollisionHandler {\r\n     private final int[][] map;\r\n     private final int tileSize;\r\n \r\n+    // Public final agar bisa diakses GameCanvas untuk debug rendering\r\n+    public final double hitboxSize;\r\n+    public final double offset;\r\n+\r\n     public CollisionHandler(int[][] map, int tileSize) {\r\n         this.map = map;\r\n         this.tileSize = tileSize;\r\n+\r\n+        // KONFIGURASI HITBOX\r\n+        // Kita set ke 24px (sekitar 75% dari tile 32px)\r\n+        this.hitboxSize = 24.0; \r\n+        \r\n+        // Hitung offset agar posisi hitbox tepat di tengah tile\r\n+        this.offset = (tileSize - hitboxSize) / 2.0;\r\n     }\r\n \r\n     /**\r\n      * Mengecek apakah area kotak di posisi (x, y) bertabrakan dengan tembok.\r\n@@ -16,17 +27,9 @@\n      * @param y Posisi Y player (kiri atas sprite)\r\n      * @return true jika ada bagian hitbox player yang menabrak tembok.\r\n      */\r\n     public boolean checkCollision(double x, double y) {\r\n-        // PERBAIKAN: Hitbox diperkecil agar player tidak gampang nyangkut di lorong.\r\n-        // Tile = 32px. Jika Hitbox = 32px, harus pixel-perfect untuk lewat (mustahil bagi manusia).\r\n-        // Kita set ke 24px. Sisa 8px (4px kiri, 4px kanan) adalah toleransi \"nyerempet\".\r\n-        double hitboxSize = 24.0; \r\n-        \r\n-        // Offset agar hitbox berada tepat di TENGAH sprite visual\r\n-        // (32 - 24) / 2 = 4.0 pixel offset dari kiri/atas gambar\r\n-        double offset = (tileSize - hitboxSize) / 2.0;\r\n-\r\n+        // Koordinat hitbox sebenarnya (digeser ke tengah sprite)\r\n         double left = x + offset;\r\n         double top = y + offset;\r\n         \r\n         // Sisi kanan dan bawah hitbox\r\n"
                },
                {
                    "date": 1764517238745,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n         this.tileSize = tileSize;\r\n \r\n         // KONFIGURASI HITBOX\r\n         // Kita set ke 24px (sekitar 75% dari tile 32px)\r\n-        this.hitboxSize = 24.0; \r\n+        this.hitboxSize = 20.0; \r\n         \r\n         // Hitung offset agar posisi hitbox tepat di tengah tile\r\n         this.offset = (tileSize - hitboxSize) / 2.0;\r\n     }\r\n"
                },
                {
                    "date": 1764517263995,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n         this.tileSize = tileSize;\r\n \r\n         // KONFIGURASI HITBOX\r\n         // Kita set ke 24px (sekitar 75% dari tile 32px)\r\n-        this.hitboxSize = 20.0; \r\n+        this.hitboxSize = 15.0; \r\n         \r\n         // Hitung offset agar posisi hitbox tepat di tengah tile\r\n         this.offset = (tileSize - hitboxSize) / 2.0;\r\n     }\r\n"
                },
                {
                    "date": 1764517324763,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n         this.tileSize = tileSize;\r\n \r\n         // KONFIGURASI HITBOX\r\n         // Kita set ke 24px (sekitar 75% dari tile 32px)\r\n-        this.hitboxSize = 15.0; \r\n+        this.hitboxSize = 10.0; \r\n         \r\n         // Hitung offset agar posisi hitbox tepat di tengah tile\r\n         this.offset = (tileSize - hitboxSize) / 2.0;\r\n     }\r\n"
                },
                {
                    "date": 1764517340877,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n         this.tileSize = tileSize;\r\n \r\n         // KONFIGURASI HITBOX\r\n         // Kita set ke 24px (sekitar 75% dari tile 32px)\r\n-        this.hitboxSize = 10.0; \r\n+        this.hitboxSize = 102.0; \r\n         \r\n         // Hitung offset agar posisi hitbox tepat di tengah tile\r\n         this.offset = (tileSize - hitboxSize) / 2.0;\r\n     }\r\n"
                },
                {
                    "date": 1764518063786,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n         this.tileSize = tileSize;\r\n \r\n         // KONFIGURASI HITBOX\r\n         // Kita set ke 24px (sekitar 75% dari tile 32px)\r\n-        this.hitboxSize = 12.0; \r\n+        this.hitboxSize = 1.0; \r\n         \r\n         // Hitung offset agar posisi hitbox tepat di tengah tile\r\n         this.offset = (tileSize - hitboxSize) / 2.0;\r\n     }\r\n"
                },
                {
                    "date": 1764518248666,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,10 +33,9 @@\n         double top = y + offset;\r\n         \r\n         // Sisi kanan dan bawah hitbox\r\n         // Dikurangi epsilon sangat kecil (-0.01) untuk mencegah floating point error pas di garis grid\r\n-        double right = left + hitboxSize - 0.01;\r\n-        double bottom = top + hitboxSize - 0.01;\r\n+       \r\n \r\n         // Cek ke-4 sudut hitbox (Kiri-Atas, Kanan-Atas, Kiri-Bawah, Kanan-Bawah)\r\n         boolean topLeft = isSolid(left, top);\r\n         boolean topRight = isSolid(right, top);\r\n"
                }
            ],
            "date": 1764516368384,
            "name": "Commit-0",
            "content": "package com.mygg.core;\r\n\r\npublic class CollisionHandler {\r\n    \r\n}\r\n"
        }
    ]
}