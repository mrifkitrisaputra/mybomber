{
    "sourceFile": "src/main/java/com/mygg/managers/ItemManager.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1764651204233,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764651417042,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,57 @@\n package com.mygg.managers;\r\n \r\n+import java.util.ArrayList;\r\n+import java.util.Iterator;\r\n+import java.util.List;\r\n+import java.util.Random;\r\n+\r\n+import com.mygg.entities.Item;\r\n+import com.mygg.entities.ItemType;\r\n+import com.mygg.entities.Player;\r\n+\r\n+import javafx.scene.canvas.GraphicsContext;\r\n+\r\n public class ItemManager {\r\n-    \r\n+\r\n+    private final List<Item> items = new ArrayList<>();\r\n+    private final Random random = new Random();\r\n+\r\n+    public void spawnRandomItem(int x, int y) {\r\n+        // 50% chance untuk spawn item\r\n+        if (random.nextDouble() < 0.5) {\r\n+            ItemType type = ItemType.values()[random.nextInt(ItemType.values().length)];\r\n+            items.add(new Item(x, y, type));\r\n+        }\r\n+    }\r\n+\r\n+    public void update(Player player) {\r\n+        Iterator<Item> it = items.iterator();\r\n+        while (it.hasNext()) {\r\n+            Item item = it.next();\r\n+\r\n+            // Check player pick up\r\n+            int px = (int) (player.x / 32);\r\n+            int py = (int) (player.y / 32);\r\n+\r\n+            if (px == item.tileX && py == item.tileY) {\r\n+                applyEffect(player, item.type);\r\n+                it.remove();\r\n+            }\r\n+        }\r\n+    }\r\n+\r\n+    private void applyEffect(Player player, ItemType type) {\r\n+        switch (type) {\r\n+            case BOMB_UP -> player.maxBombs++;\r\n+            case SPEED_UP -> {\r\n+                player.speed *= 1.5; // misal 1.5x speed\r\n+                player.speedBuffTimer = 5.0; // 5 detik\r\n+            }\r\n+            case FIRE_UP -> player.bombRange++;\r\n+        }\r\n+    }\r\n+\r\n+    public void render(GraphicsContext g) {\r\n+        for (Item item : items) item.render(g);\r\n+    }\r\n }\r\n"
                },
                {
                    "date": 1764651425933,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n import java.util.List;\r\n import java.util.Random;\r\n \r\n import com.mygg.entities.Item;\r\n-import com.mygg.entities.ItemType;\r\n+import com.mygg.entities.Item;\r\n import com.mygg.entities.Player;\r\n \r\n import javafx.scene.canvas.GraphicsContext;\r\n \r\n"
                },
                {
                    "date": 1764651441277,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,31 +4,31 @@\n import java.util.Iterator;\r\n import java.util.List;\r\n import java.util.Random;\r\n \r\n-import com.mygg.entities.Item;\r\n-import com.mygg.entities.Item;\r\n+import com.mygg.entities.ItemType;\r\n+import com.mygg.entities.ItemType;\r\n import com.mygg.entities.Player;\r\n \r\n import javafx.scene.canvas.GraphicsContext;\r\n \r\n public class ItemManager {\r\n \r\n-    private final List<Item> items = new ArrayList<>();\r\n+    private final List<ItemType> items = new ArrayList<>();\r\n     private final Random random = new Random();\r\n \r\n     public void spawnRandomItem(int x, int y) {\r\n         // 50% chance untuk spawn item\r\n         if (random.nextDouble() < 0.5) {\r\n             ItemType type = ItemType.values()[random.nextInt(ItemType.values().length)];\r\n-            items.add(new Item(x, y, type));\r\n+            items.add(new ItemType(x, y, type));\r\n         }\r\n     }\r\n \r\n     public void update(Player player) {\r\n-        Iterator<Item> it = items.iterator();\r\n+        Iterator<ItemType> it = items.iterator();\r\n         while (it.hasNext()) {\r\n-            Item item = it.next();\r\n+            ItemType item = it.next();\r\n \r\n             // Check player pick up\r\n             int px = (int) (player.x / 32);\r\n             int py = (int) (player.y / 32);\r\n@@ -51,7 +51,7 @@\n         }\r\n     }\r\n \r\n     public void render(GraphicsContext g) {\r\n-        for (Item item : items) item.render(g);\r\n+        for (ItemType item : items) item.render(g);\r\n     }\r\n }\r\n"
                },
                {
                    "date": 1764651446979,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n import java.util.List;\r\n import java.util.Random;\r\n \r\n import com.mygg.entities.ItemType;\r\n-import com.mygg.entities.ItemType;\r\n+import com.mygg.entities.ItemType;  \r\n import com.mygg.entities.Player;\r\n \r\n import javafx.scene.canvas.GraphicsContext;\r\n \r\n"
                },
                {
                    "date": 1764651556310,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,8 @@\n import java.util.List;\r\n import java.util.Random;\r\n \r\n import com.mygg.entities.ItemType;\r\n-import com.mygg.entities.ItemType;  \r\n import com.mygg.entities.Player;\r\n \r\n import javafx.scene.canvas.GraphicsContext;\r\n \r\n"
                },
                {
                    "date": 1764651865326,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,56 +1,86 @@\n package com.mygg.managers;\r\n \r\n+import com.mygg.entities.Item;\r\n+import com.mygg.entities.Player;\r\n+import javafx.scene.canvas.GraphicsContext;\r\n+import javafx.scene.image.Image;\r\n+\r\n import java.util.ArrayList;\r\n import java.util.Iterator;\r\n import java.util.List;\r\n import java.util.Random;\r\n \r\n-import com.mygg.entities.ItemType;\r\n-import com.mygg.entities.Player;\r\n-\r\n-import javafx.scene.canvas.GraphicsContext;\r\n-\r\n public class ItemManager {\r\n \r\n-    private final List<ItemType> items = new ArrayList<>();\r\n+    private final List<Item> items = new ArrayList<>();\r\n+    private final Image imgBombUp, imgFireUp, imgSpeedUp;\r\n+    private final int tileSize;\r\n     private final Random random = new Random();\r\n \r\n-    public void spawnRandomItem(int x, int y) {\r\n-        // 50% chance untuk spawn item\r\n-        if (random.nextDouble() < 0.5) {\r\n-            ItemType type = ItemType.values()[random.nextInt(ItemType.values().length)];\r\n-            items.add(new ItemType(x, y, type));\r\n+    public ItemManager(int tileSize) {\r\n+        this.tileSize = tileSize;\r\n+        // Load asset images\r\n+        imgBombUp = new Image(getClass().getResourceAsStream(\"/com/mygg/assets/item/BombUp.png\"), tileSize, tileSize, false, false);\r\n+        imgFireUp = new Image(getClass().getResourceAsStream(\"/com/mygg/assets/item/FireUp.png\"), tileSize, tileSize, false, false);\r\n+        imgSpeedUp = new Image(getClass().getResourceAsStream(\"/com/mygg/assets/item/SpeedUp.png\"), tileSize, tileSize, false, false);\r\n+    }\r\n+\r\n+    public void trySpawnItem(int gridX, int gridY) {\r\n+        // Chance 30% muncul item\r\n+        if (random.nextDouble() < 0.3) {\r\n+            \r\n+            // Panggil Enum lewat class Item\r\n+            Item.Type type; \r\n+            double r = random.nextDouble();\r\n+\r\n+            if (r < 0.33) {\r\n+                type = Item.Type.BOMB_UP;\r\n+            } else if (r < 0.66) {\r\n+                type = Item.Type.FIRE_UP;\r\n+            } else {\r\n+                type = Item.Type.SPEED_UP;\r\n+            }\r\n+\r\n+            items.add(new Item(gridX, gridY, type));\r\n+            System.out.println(\"Spawned Item: \" + type + \" at \" + gridX + \",\" + gridY);\r\n         }\r\n     }\r\n \r\n     public void update(Player player) {\r\n-        Iterator<ItemType> it = items.iterator();\r\n+        Iterator<Item> it = items.iterator();\r\n         while (it.hasNext()) {\r\n-            ItemType item = it.next();\r\n+            Item item = it.next();\r\n \r\n-            // Check player pick up\r\n-            int px = (int) (player.x / 32);\r\n-            int py = (int) (player.y / 32);\r\n+            // Hitung grid player (tambah 16/setengah tile biar deteksi titik tengah)\r\n+            int pGridX = (int) ((player.x + tileSize / 2) / tileSize);\r\n+            int pGridY = (int) ((player.y + tileSize / 2) / tileSize);\r\n \r\n-            if (px == item.tileX && py == item.tileY) {\r\n+            if (item.x == pGridX && item.y == pGridY) {\r\n                 applyEffect(player, item.type);\r\n                 it.remove();\r\n+                System.out.println(\"Picked up: \" + item.type);\r\n             }\r\n         }\r\n     }\r\n \r\n-    private void applyEffect(Player player, ItemType type) {\r\n+    private void applyEffect(Player player, Item.Type type) {\r\n         switch (type) {\r\n-            case BOMB_UP -> player.maxBombs++;\r\n-            case SPEED_UP -> {\r\n-                player.speed *= 1.5; // misal 1.5x speed\r\n-                player.speedBuffTimer = 5.0; // 5 detik\r\n-            }\r\n-            case FIRE_UP -> player.bombRange++;\r\n+            case BOMB_UP -> player.addBombLimit();\r\n+            case FIRE_UP -> player.addFirePower();\r\n+            case SPEED_UP -> player.activateSpeedUp(5.0); // Durasi 5 detik\r\n         }\r\n     }\r\n \r\n     public void render(GraphicsContext g) {\r\n-        for (ItemType item : items) item.render(g);\r\n+        for (Item item : items) {\r\n+            Image img = switch (item.type) {\r\n+                case BOMB_UP -> imgBombUp;\r\n+                case FIRE_UP -> imgFireUp;\r\n+                case SPEED_UP -> imgSpeedUp;\r\n+            };\r\n+            if (img != null) {\r\n+                g.drawImage(img, item.x * tileSize, item.y * tileSize);\r\n+            }\r\n+        }\r\n     }\r\n-}\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1764651204233,
            "name": "Commit-0",
            "content": "package com.mygg.managers;\r\n\r\npublic class ItemManager {\r\n    \r\n}\r\n"
        }
    ]
}