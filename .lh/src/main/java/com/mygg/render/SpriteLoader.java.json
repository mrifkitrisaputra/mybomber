{
    "sourceFile": "src/main/java/com/mygg/render/SpriteLoader.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1764385443390,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764394991182,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,10 @@\n import com.google.gson.reflect.TypeToken;\r\n \r\n import javafx.scene.image.Image;\r\n import javafx.scene.image.WritableImage;\r\n+import javafx.scene.image.PixelReader;\r\n+import javafx.scene.image.PixelWriter;\r\n \r\n public class SpriteLoader {\r\n \r\n     public static class FrameDef {\r\n@@ -24,41 +26,57 @@\n     private final HashMap<String, WritableImage> frames = new HashMap<>();\r\n \r\n     public void load(String jsonPath, String imagePath) {\r\n \r\n-    try {\r\n-        // Load spritesheet image\r\n-        Image sheet = new Image(getClass().getResourceAsStream(imagePath));\r\n-        if (sheet.isError()) throw new RuntimeException(\"Image load error\");\r\n+        try {\r\n+            // Load spritesheet image\r\n+            Image sheet = new Image(getClass().getResourceAsStream(imagePath));\r\n+            if (sheet.isError()) throw new RuntimeException(\"Image load error\");\r\n \r\n-        // Load JSON\r\n-        Type listType = new TypeToken<List<FrameDef>>() {}.getType();\r\n-        InputStreamReader reader = new InputStreamReader(\r\n-                getClass().getResourceAsStream(jsonPath)\r\n-        );\r\n+            // Load JSON\r\n+            Type listType = new TypeToken<List<FrameDef>>() {}.getType();\r\n+            InputStreamReader reader = new InputStreamReader(\r\n+                    getClass().getResourceAsStream(jsonPath)\r\n+            );\r\n \r\n-        List<FrameDef> defs = new Gson().fromJson(reader, listType);\r\n+            List<FrameDef> defs = new Gson().fromJson(reader, listType);\r\n \r\n-        // === SORT BERDASARKAN NAMA ===\r\n-        defs.sort((a, b) -> a.name.compareToIgnoreCase(b.name));\r\n+            // SORT BERDASARKAN NAMA\r\n+            defs.sort((a, b) -> a.name.compareToIgnoreCase(b.name));\r\n \r\n-        for (FrameDef def : defs) {\r\n-            WritableImage frame = new WritableImage(\r\n-                    sheet.getPixelReader(),\r\n-                    def.x, def.y,\r\n-                    def.width, def.height\r\n-            );\r\n-            frames.put(def.name, frame);\r\n-        }\r\n+            // === Loop frames + RESIZE ke 32x32 ===\r\n+            for (FrameDef def : defs) {\r\n \r\n-        System.out.println(\"Loaded frames: \" + frames.size());\r\n+                PixelReader pr = sheet.getPixelReader();\r\n+                WritableImage raw = new WritableImage(pr, def.x, def.y, def.width, def.height);\r\n \r\n+                int target = 32; // ukuran sprite final\r\n+                WritableImage resized = new WritableImage(target, target);\r\n+\r\n+                PixelWriter pw = resized.getPixelWriter();\r\n+                PixelReader rawPR = raw.getPixelReader();\r\n+\r\n+                // nearest-neighbor scale\r\n+                for (int y = 0; y < target; y++) {\r\n+                    for (int x = 0; x < target; x++) {\r\n+\r\n+                        int srcX = x * def.width / target;\r\n+                        int srcY = y * def.height / target;\r\n+\r\n+                        pw.setArgb(x, y, rawPR.getArgb(srcX, srcY));\r\n+                    }\r\n+                }\r\n+\r\n+                frames.put(def.name, resized);\r\n+            }\r\n+\r\n+            System.out.println(\"Loaded frames (resized to 32x32): \" + frames.size());\r\n+\r\n         } catch (Exception e) {\r\n             e.printStackTrace();\r\n         }\r\n     }\r\n \r\n-\r\n     public WritableImage get(String name) {\r\n         return frames.get(name);\r\n     }\r\n }\r\n"
                }
            ],
            "date": 1764385443390,
            "name": "Commit-0",
            "content": "package com.mygg.render;\r\n\r\nimport java.io.InputStreamReader;\r\nimport java.lang.reflect.Type;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.reflect.TypeToken;\r\n\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.WritableImage;\r\n\r\npublic class SpriteLoader {\r\n\r\n    public static class FrameDef {\r\n        String name;\r\n        int x;\r\n        int y;\r\n        int width;\r\n        int height;\r\n    }\r\n\r\n    private final HashMap<String, WritableImage> frames = new HashMap<>();\r\n\r\n    public void load(String jsonPath, String imagePath) {\r\n\r\n    try {\r\n        // Load spritesheet image\r\n        Image sheet = new Image(getClass().getResourceAsStream(imagePath));\r\n        if (sheet.isError()) throw new RuntimeException(\"Image load error\");\r\n\r\n        // Load JSON\r\n        Type listType = new TypeToken<List<FrameDef>>() {}.getType();\r\n        InputStreamReader reader = new InputStreamReader(\r\n                getClass().getResourceAsStream(jsonPath)\r\n        );\r\n\r\n        List<FrameDef> defs = new Gson().fromJson(reader, listType);\r\n\r\n        // === SORT BERDASARKAN NAMA ===\r\n        defs.sort((a, b) -> a.name.compareToIgnoreCase(b.name));\r\n\r\n        for (FrameDef def : defs) {\r\n            WritableImage frame = new WritableImage(\r\n                    sheet.getPixelReader(),\r\n                    def.x, def.y,\r\n                    def.width, def.height\r\n            );\r\n            frames.put(def.name, frame);\r\n        }\r\n\r\n        System.out.println(\"Loaded frames: \" + frames.size());\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n    public WritableImage get(String name) {\r\n        return frames.get(name);\r\n    }\r\n}\r\n"
        }
    ]
}