{
    "sourceFile": "src/main/java/com/mygg/render/SpriteLoader.java",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1764385443390,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764394991182,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,10 @@\n import com.google.gson.reflect.TypeToken;\r\n \r\n import javafx.scene.image.Image;\r\n import javafx.scene.image.WritableImage;\r\n+import javafx.scene.image.PixelReader;\r\n+import javafx.scene.image.PixelWriter;\r\n \r\n public class SpriteLoader {\r\n \r\n     public static class FrameDef {\r\n@@ -24,41 +26,57 @@\n     private final HashMap<String, WritableImage> frames = new HashMap<>();\r\n \r\n     public void load(String jsonPath, String imagePath) {\r\n \r\n-    try {\r\n-        // Load spritesheet image\r\n-        Image sheet = new Image(getClass().getResourceAsStream(imagePath));\r\n-        if (sheet.isError()) throw new RuntimeException(\"Image load error\");\r\n+        try {\r\n+            // Load spritesheet image\r\n+            Image sheet = new Image(getClass().getResourceAsStream(imagePath));\r\n+            if (sheet.isError()) throw new RuntimeException(\"Image load error\");\r\n \r\n-        // Load JSON\r\n-        Type listType = new TypeToken<List<FrameDef>>() {}.getType();\r\n-        InputStreamReader reader = new InputStreamReader(\r\n-                getClass().getResourceAsStream(jsonPath)\r\n-        );\r\n+            // Load JSON\r\n+            Type listType = new TypeToken<List<FrameDef>>() {}.getType();\r\n+            InputStreamReader reader = new InputStreamReader(\r\n+                    getClass().getResourceAsStream(jsonPath)\r\n+            );\r\n \r\n-        List<FrameDef> defs = new Gson().fromJson(reader, listType);\r\n+            List<FrameDef> defs = new Gson().fromJson(reader, listType);\r\n \r\n-        // === SORT BERDASARKAN NAMA ===\r\n-        defs.sort((a, b) -> a.name.compareToIgnoreCase(b.name));\r\n+            // SORT BERDASARKAN NAMA\r\n+            defs.sort((a, b) -> a.name.compareToIgnoreCase(b.name));\r\n \r\n-        for (FrameDef def : defs) {\r\n-            WritableImage frame = new WritableImage(\r\n-                    sheet.getPixelReader(),\r\n-                    def.x, def.y,\r\n-                    def.width, def.height\r\n-            );\r\n-            frames.put(def.name, frame);\r\n-        }\r\n+            // === Loop frames + RESIZE ke 32x32 ===\r\n+            for (FrameDef def : defs) {\r\n \r\n-        System.out.println(\"Loaded frames: \" + frames.size());\r\n+                PixelReader pr = sheet.getPixelReader();\r\n+                WritableImage raw = new WritableImage(pr, def.x, def.y, def.width, def.height);\r\n \r\n+                int target = 32; // ukuran sprite final\r\n+                WritableImage resized = new WritableImage(target, target);\r\n+\r\n+                PixelWriter pw = resized.getPixelWriter();\r\n+                PixelReader rawPR = raw.getPixelReader();\r\n+\r\n+                // nearest-neighbor scale\r\n+                for (int y = 0; y < target; y++) {\r\n+                    for (int x = 0; x < target; x++) {\r\n+\r\n+                        int srcX = x * def.width / target;\r\n+                        int srcY = y * def.height / target;\r\n+\r\n+                        pw.setArgb(x, y, rawPR.getArgb(srcX, srcY));\r\n+                    }\r\n+                }\r\n+\r\n+                frames.put(def.name, resized);\r\n+            }\r\n+\r\n+            System.out.println(\"Loaded frames (resized to 32x32): \" + frames.size());\r\n+\r\n         } catch (Exception e) {\r\n             e.printStackTrace();\r\n         }\r\n     }\r\n \r\n-\r\n     public WritableImage get(String name) {\r\n         return frames.get(name);\r\n     }\r\n }\r\n"
                },
                {
                    "date": 1764517829125,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,80 +1,68 @@\n package com.mygg.render;\r\n \r\n-import java.io.InputStreamReader;\r\n-import java.lang.reflect.Type;\r\n+import java.io.File;\r\n+import java.net.URL;\r\n import java.util.HashMap;\r\n-import java.util.List;\r\n \r\n-import com.google.gson.Gson;\r\n-import com.google.gson.reflect.TypeToken;\r\n-\r\n import javafx.scene.image.Image;\r\n import javafx.scene.image.PixelReader;\r\n import javafx.scene.image.PixelWriter;\r\n import javafx.scene.image.WritableImage;\r\n \r\n public class SpriteLoader {\r\n \r\n-    public static class FrameDef {\r\n-        String name;\r\n-        int x;\r\n-        int y;\r\n-        int width;\r\n-        int height;\r\n-    }\r\n-\r\n     private final HashMap<String, WritableImage> frames = new HashMap<>();\r\n+    private final int TARGET_SIZE = 32;\r\n \r\n-    public void load(String jsonPath, String imagePath) {\r\n-\r\n+    public void loadFolder(String folderPath) {\r\n         try {\r\n-            // Load spritesheet image\r\n-            Image sheet = new Image(getClass().getResourceAsStream(imagePath));\r\n-            if (sheet.isError()) throw new RuntimeException(\"Image load error\");\r\n+            URL url = getClass().getResource(folderPath);\r\n+            if (url == null) {\r\n+                throw new RuntimeException(\"Folder not found: \" + folderPath);\r\n+            }\r\n \r\n-            // Load JSON\r\n-            Type listType = new TypeToken<List<FrameDef>>() {}.getType();\r\n-            InputStreamReader reader = new InputStreamReader(\r\n-                    getClass().getResourceAsStream(jsonPath)\r\n-            );\r\n+            File folder = new File(url.toURI());\r\n+            File[] files = folder.listFiles((dir, name) -> name.endsWith(\".png\"));\r\n+            if (files == null) return;\r\n \r\n-            List<FrameDef> defs = new Gson().fromJson(reader, listType);\r\n+            for (File file : files) {\r\n+                String fileName = file.getName(); // contoh: sP2Down_0.png\r\n \r\n-            // SORT BERDASARKAN NAMA\r\n-            defs.sort((a, b) -> a.name.compareToIgnoreCase(b.name));\r\n+                Image raw = new Image(file.toURI().toString());\r\n+                WritableImage resized = resizeTo32(raw);\r\n \r\n-            // === Loop frames + RESIZE ke 32x32 ===\r\n-            for (FrameDef def : defs) {\r\n+                // remove extension\r\n+                String key = fileName.substring(0, fileName.lastIndexOf(\".\"));\r\n \r\n-                PixelReader pr = sheet.getPixelReader();\r\n-                WritableImage raw = new WritableImage(pr, def.x, def.y, def.width, def.height);\r\n+                frames.put(key, resized);\r\n+            }\r\n \r\n-                int target = 32; // ukuran sprite final\r\n-                WritableImage resized = new WritableImage(target, target);\r\n+            System.out.println(\"Loaded PNG frames: \" + frames.size());\r\n \r\n-                PixelWriter pw = resized.getPixelWriter();\r\n-                PixelReader rawPR = raw.getPixelReader();\r\n+        } catch (Exception e) {\r\n+            e.printStackTrace();\r\n+        }\r\n+    }\r\n \r\n-                // nearest-neighbor scale\r\n-                for (int y = 0; y < target; y++) {\r\n-                    for (int x = 0; x < target; x++) {\r\n+    private WritableImage resizeTo32(Image raw) {\r\n+        WritableImage out = new WritableImage(TARGET_SIZE, TARGET_SIZE);\r\n \r\n-                        int srcX = x * def.width / target;\r\n-                        int srcY = y * def.height / target;\r\n+        PixelWriter pw = out.getPixelWriter();\r\n+        PixelReader pr = raw.getPixelReader();\r\n \r\n-                        pw.setArgb(x, y, rawPR.getArgb(srcX, srcY));\r\n-                    }\r\n-                }\r\n+        int w = (int) raw.getWidth();\r\n+        int h = (int) raw.getHeight();\r\n \r\n-                frames.put(def.name, resized);\r\n+        // nearest neighbor scaling\r\n+        for (int y = 0; y < TARGET_SIZE; y++) {\r\n+            for (int x = 0; x < TARGET_SIZE; x++) {\r\n+                int srcX = x * w / TARGET_SIZE;\r\n+                int srcY = y * h / TARGET_SIZE;\r\n+                pw.setArgb(x, y, pr.getArgb(srcX, srcY));\r\n             }\r\n-\r\n-            System.out.println(\"Loaded frames (resized to 32x32): \" + frames.size());\r\n-\r\n-        } catch (Exception e) {\r\n-            e.printStackTrace();\r\n         }\r\n+        return out;\r\n     }\r\n \r\n     public WritableImage get(String name) {\r\n         return frames.get(name);\r\n"
                },
                {
                    "date": 1764520959665,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,68 +1,80 @@\n package com.mygg.render;\r\n \r\n-import java.io.File;\r\n-import java.net.URL;\r\n+import java.io.InputStreamReader;\r\n+import java.lang.reflect.Type;\r\n import java.util.HashMap;\r\n+import java.util.List;\r\n \r\n+import com.google.gson.Gson;\r\n+import com.google.gson.reflect.TypeToken;\r\n+\r\n import javafx.scene.image.Image;\r\n import javafx.scene.image.PixelReader;\r\n import javafx.scene.image.PixelWriter;\r\n import javafx.scene.image.WritableImage;\r\n \r\n public class SpriteLoader {\r\n \r\n+    public static class FrameDef {\r\n+        String name;\r\n+        int x;\r\n+        int y;\r\n+        int width;\r\n+        int height;\r\n+    }\r\n+\r\n     private final HashMap<String, WritableImage> frames = new HashMap<>();\r\n-    private final int TARGET_SIZE = 32;\r\n \r\n-    public void loadFolder(String folderPath) {\r\n+    public void load(String jsonPath, String imagePath) {\r\n+\r\n         try {\r\n-            URL url = getClass().getResource(folderPath);\r\n-            if (url == null) {\r\n-                throw new RuntimeException(\"Folder not found: \" + folderPath);\r\n-            }\r\n+            // Load spritesheet image\r\n+            Image sheet = new Image(getClass().getResourceAsStream(imagePath));\r\n+            if (sheet.isError()) throw new RuntimeException(\"Image load error\");\r\n \r\n-            File folder = new File(url.toURI());\r\n-            File[] files = folder.listFiles((dir, name) -> name.endsWith(\".png\"));\r\n-            if (files == null) return;\r\n+            // Load JSON\r\n+            Type listType = new TypeToken<List<FrameDef>>() {}.getType();\r\n+            InputStreamReader reader = new InputStreamReader(\r\n+                    getClass().getResourceAsStream(jsonPath)\r\n+            );\r\n \r\n-            for (File file : files) {\r\n-                String fileName = file.getName(); // contoh: sP2Down_0.png\r\n+            List<FrameDef> defs = new Gson().fromJson(reader, listType);\r\n \r\n-                Image raw = new Image(file.toURI().toString());\r\n-                WritableImage resized = resizeTo32(raw);\r\n+            // SORT BERDASARKAN NAMA\r\n+            defs.sort((a, b) -> a.name.compareToIgnoreCase(b.name));\r\n \r\n-                // remove extension\r\n-                String key = fileName.substring(0, fileName.lastIndexOf(\".\"));\r\n+            // === Loop frames + RESIZE ke 32x32 ===\r\n+            for (FrameDef def : defs) {\r\n \r\n-                frames.put(key, resized);\r\n-            }\r\n+                PixelReader pr = sheet.getPixelReader();\r\n+                WritableImage raw = new WritableImage(pr, def.x, def.y, def.width, def.height);\r\n \r\n-            System.out.println(\"Loaded PNG frames: \" + frames.size());\r\n+                int target = 32; // ukuran sprite final\r\n+                WritableImage resized = new WritableImage(target, target);\r\n \r\n-        } catch (Exception e) {\r\n-            e.printStackTrace();\r\n-        }\r\n-    }\r\n+                PixelWriter pw = resized.getPixelWriter();\r\n+                PixelReader rawPR = raw.getPixelReader();\r\n \r\n-    private WritableImage resizeTo32(Image raw) {\r\n-        WritableImage out = new WritableImage(TARGET_SIZE, TARGET_SIZE);\r\n+                // nearest-neighbor scale\r\n+                for (int y = 0; y < target; y++) {\r\n+                    for (int x = 0; x < target; x++) {\r\n \r\n-        PixelWriter pw = out.getPixelWriter();\r\n-        PixelReader pr = raw.getPixelReader();\r\n+                        int srcX = x * def.width / target;\r\n+                        int srcY = y * def.height / target;\r\n \r\n-        int w = (int) raw.getWidth();\r\n-        int h = (int) raw.getHeight();\r\n+                        pw.setArgb(x, y, rawPR.getArgb(srcX, srcY));\r\n+                    }\r\n+                }\r\n \r\n-        // nearest neighbor scaling\r\n-        for (int y = 0; y < TARGET_SIZE; y++) {\r\n-            for (int x = 0; x < TARGET_SIZE; x++) {\r\n-                int srcX = x * w / TARGET_SIZE;\r\n-                int srcY = y * h / TARGET_SIZE;\r\n-                pw.setArgb(x, y, pr.getArgb(srcX, srcY));\r\n+                frames.put(def.name, resized);\r\n             }\r\n+\r\n+            System.out.println(\"Loaded frames (resized to 32x32): \" + frames.size());\r\n+\r\n+        } catch (Exception e) {\r\n+            e.printStackTrace();\r\n         }\r\n-        return out;\r\n     }\r\n \r\n     public WritableImage get(String name) {\r\n         return frames.get(name);\r\n"
                }
            ],
            "date": 1764385443390,
            "name": "Commit-0",
            "content": "package com.mygg.render;\r\n\r\nimport java.io.InputStreamReader;\r\nimport java.lang.reflect.Type;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.reflect.TypeToken;\r\n\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.WritableImage;\r\n\r\npublic class SpriteLoader {\r\n\r\n    public static class FrameDef {\r\n        String name;\r\n        int x;\r\n        int y;\r\n        int width;\r\n        int height;\r\n    }\r\n\r\n    private final HashMap<String, WritableImage> frames = new HashMap<>();\r\n\r\n    public void load(String jsonPath, String imagePath) {\r\n\r\n    try {\r\n        // Load spritesheet image\r\n        Image sheet = new Image(getClass().getResourceAsStream(imagePath));\r\n        if (sheet.isError()) throw new RuntimeException(\"Image load error\");\r\n\r\n        // Load JSON\r\n        Type listType = new TypeToken<List<FrameDef>>() {}.getType();\r\n        InputStreamReader reader = new InputStreamReader(\r\n                getClass().getResourceAsStream(jsonPath)\r\n        );\r\n\r\n        List<FrameDef> defs = new Gson().fromJson(reader, listType);\r\n\r\n        // === SORT BERDASARKAN NAMA ===\r\n        defs.sort((a, b) -> a.name.compareToIgnoreCase(b.name));\r\n\r\n        for (FrameDef def : defs) {\r\n            WritableImage frame = new WritableImage(\r\n                    sheet.getPixelReader(),\r\n                    def.x, def.y,\r\n                    def.width, def.height\r\n            );\r\n            frames.put(def.name, frame);\r\n        }\r\n\r\n        System.out.println(\"Loaded frames: \" + frames.size());\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n    public WritableImage get(String name) {\r\n        return frames.get(name);\r\n    }\r\n}\r\n"
        }
    ]
}